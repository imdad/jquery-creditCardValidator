/*!
 * jQuery.creditCardValidator.js v1.0.0
 *
 * Copyright 2011 Johannes RÃ¶ttger
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(function(c){var a={init:function(f){var g={event:"blur",success:function(i,h){},error:function(j,h,i){}};return this.each(function(){if(f){c.extend(g,f)}c(this).bind(g.event+".creditCardValidator",function(){var i=c(this).val().replace(/[\-\ ]+/g,"");var h=b.INVALID;c.each(d,function(k,j){c.each(j.patterns,function(m,l){if(i.match(l)){h=j.type}})});if(h===b.INVALID){if("function"===typeof g.error){g.error(i,b.INVALID,"Invalid card type.")}return}if(!e(i)){if("function"===typeof g.error){g.error(i,h,"Luhn check failed.")}return}if("function"===typeof g.success){g.success(i,h)}})})},destroy:function(){return this.each(function(){c(this).unbind(".creditCardValidator")})}};var b={INVALID:"invalid",VISA:"visa",AMEX:"amex",MASTERCARD:"mastercard"};var d={amex:{patterns:[/^3[47][0-9]{13}$/],type:b.AMEX},visa:{patterns:[/^4[0-9]{15}$/],type:b.VISA},mastercard:{patterns:[/^5[1-5][0-9]{14}$/],type:b.MASTERCARD}};var e=function(f){var i,g=0,j=1,h=f.length;while(h--){i=parseInt(f.charAt(h),10)*j;g+=i-(i>9)*9;j^=3}return g>0&&(g%10===0)};c.fn.creditCardValidator=function(f){if(a[f]){return a[f].apply(this,Array.prototype.slice.call(arguments,1))}else{if("object"===typeof f||!f){return a.init.apply(this,arguments)}else{c.error("Method "+f+" does not exist on jQuery.creditCardValidator")}}}})(jQuery);